<docs>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCDriver">
	<![CDATA[
	<b>NUOPC Driver</b><hr/>
	Driver component that drives Model, Mediator, and Connector components. The default is to use explicit time stepping. For every Driver time step the same sequence of Model, Mediator, and Connector Run methods are called. The run sequence is fully customizable.
	]]>
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.SetServicesCodeConcept">
	<div class="content">
		<div class="container">
			<div class="main">
				<h1>SetServices</h1>
				<h2>(Required, Implementor Provided)</h2>
				<hr />
				<p>
				All ESMF-based Components (including NUOPC Components) must define a <code>SetServices()</code> method. Within NUOPC Components, the SetServices subroutine is used to define which generic Component is being extended (i.e., Driver, Model, Mediator, or Connector), to register entry points, and to register specialization methods.
				</p>
			</div>
		</div>
	</div>
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCDriver.Initialization">
	<![CDATA[
	
	<b>Initialize</b><hr/>

			<UL>
		<LI>phase 0: (R<SMALL>EQUIRED, </SMALL>NUOPC P<SMALL>ROVIDED</SMALL>)
		  
		<UL>
		<LI>Initialize the <TT>InitializePhaseMap</TT> Attribute according to the NUOPC Initialize Phase Definition (IPD) version 00 (see section 2.4.2 for a precise definition), with the following mapping:
		    
		<UL>
		<LI>IPDv00p1 = phase 1: (R<SMALL>EQUIRED, </SMALL>NUOPC P<SMALL>ROVIDED</SMALL>)
		    
		</LI>
		</UL>
		</LI>
		</UL>  
		</LI>
		<LI>phase 1: (NUOPC P<SMALL>ROVIDED</SMALL>, suitable for: IPDv00p1)
		  
		<UL>
		<LI>Allocate and initialize the internal state.
		</LI>
		<LI>If the internal clock is not yet set, set the default internal clock to be a copy of the incoming clock, if the incoming clock is valid.
		</LI>
		<LI><I>Required specialization</I> to set number of Model+Mediator components, <TT>modelCount</TT>, in the internal state: <TT>label_SetModelCount</TT>.
		</LI>
		<LI>Allocate internal storage according to <TT>modelCount</TT>.
		</LI>
		<LI><I>Optional specialization</I> to provide Model, Mediator, and Connector <TT>petList</TT> members in the internal state: <TT>label_SetModelPetList</TT>.
		</LI>
		<LI>Create Model and Mediator components with their import and export States.
		</LI>
		<LI>Attach standard NUOPC Model Component metadata.
		</LI>
		<LI>Create Connector components.
		</LI>
		<LI>Attach standard NUOPC Connector Component metadata.
		</LI>
		<LI>Initialize the default run sequence.
		</LI>
		<LI><I>Required specialization</I> to set component services: <TT>label_SetModelServices</TT>. 
		  
		<UL>
		<LI>Call into SetServices() for all Model, Mediator, and Connector components.
		</LI>
		<LI>Optionally replace the default clock. 
		</LI>

		</UL>
		</LI>
		<LI>Execute Initialize phase=0 for all Model, Mediator, and Connector components. This is the method where each component is required to initialize its <TT>InitializePhaseMap</TT> Attribute.
		</LI>
		<LI><I>Optional specialization</I> to analyze and modify components' <TT>InitializePhaseMap</TT> Attribute before the Driver uses it: <TT>label_ModifyInitializePhaseMap</TT>.
		</LI>
		<LI>Implement the initialize sequence for the child components, compatible with up to IPD version 02, as documented in section 2.4.2.
		  
		</LI>
		</UL>
		</LI>
		</UL>	
	]]>
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCDriver.SetModelCount">
	<![CDATA[
	<b>SetModelCount</b><hr/>
	Required specialization to set number of Model+Mediator components, modelCount, in the internal state: <tt>label_SetModelCount</tt>.
	]]>
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCDriver.SetModelPetLists">
	<![CDATA[
	<b>SetModelPetLists</b><hr/>
	Optional specialization to provide Model, Mediator, and Connector petList members in the internal state: <tt>label_SetModelPetLists</tt>.
	]]>
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCDriver.SetModelServices">
	<![CDATA[
	<b>SetModelServices</b><hr/>
	<i>Required specialization</i> to set component services: <tt>label_SetModelServices</tt>. 
		<UL>
		<LI>Call into SetServices() for all Model, Mediator, and Connector components.</LI>
		<LI>Optionally replace the default clock.</LI>
		</UL>
	]]>
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCDriver.SetRunSequence">
	<![CDATA[
	<b>SetRunSequence</b><hr/>
	<i>Optional specialization</i> to replace the default run sequence: <tt>label_SetRunSequence</tt>. 
	]]>
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel">
	<div class="content">
		<div class="container">
			<div class="main">
				<h1>NUOPC Model</h1>
				<hr />
				<p>
	A NUOC Model component has a default <i>explicit</i> time dependency. Each time the Run method is called the model integrates one timeStep forward on the provided Clock. The Clock must be advanced between Run calls. The component's Run method flags incompatibility if the current time of the incoming Clock does not match the current time of the model.
				</p>
			</div>
		</div>
	</div>

	</doc>
	
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.IPDv00">

	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.IPD.IPDv04p1">
	<div class="content">
		<div class="container">
			<div class="main">
				<h1>IPDv00p1, IPDv01p1, IPDv02p1, IPDv03p1, IPDv04p1 - Advertise Fields</h1>
				<h2>(Required, Implementor Provided)</h2>
				<hr />

				<p>
					Advertise model Fields in import/export States using
					<code>NUOPC_StateAdvertiseField()</code>
					and/or
					<code>NUOPC_StateAdvertiseFields()</code>
					.
					<br />
					<br />
					The methods above require a Standard Name for the Field, and that
					Standard Name must appear
					in the NUOPC Field Dictionary or a runtime error is generated.
					(There is an exception to this
					rule if
					<code>NUOPC_FieldDictionarySetAutoAdd</code>
					has been set to .true.)
					<br />
					<br />
					<code>NUOPC_StateAdvertiseField()</code>
					accepts a TransferOfferGeomObject argument which may be one of:
					<ul>
						<li>"will provide" (default) - The Field will provide its own
							geom object (Grid/Mesh/XGrid/LocStream)
						</li>
						<li>"can provide" - The Field can provide its own geom object,
							but only if the connected Field in the other Component will not
							provide it
						</li>
						<li>"cannot provide" - The Field cannot provide its own geom
							object. It must accept a geom object from a connected Field.
						</li>
					</ul>
					Memory is not allocated for advertised Fields, but attributes are
					set on the Field which
					can be used in later phases, especially for determining if another
					Component can provide
					and/or consume the advertised Field.
				</p>
			</div>
		</div>
	</div>
	</doc>
	

	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.IPD.IPDv04p2">
		<div class="content">
		<div class="container">
			<div class="main">
				<h1>IPDv01p2, IPDv02p2, IPDv03p2, IPDv04p2 - <i>Unspecified by NUOPC</i></h1>
				<hr />
				<p>
					This phase is unspecified by NUOPC for Model components.
				</p>
			</div>
		</div>
	</div>	
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.IPD.IPDv04p3">
	<div class="content">
		<div class="container">
			<div class="main">
				<h1>IPDv00p2, IPDv01p3, IPDv02p3, IPDv03p3, IPDv04p3 - Realize Fields <i>Providing</i> a Geom Object</h1>
				<h2>Required, Implementor Provided</h2>
				<hr />
				<p>
					Realize <i>connected</i> import and export Fields that have their TransferActionGeomObject attribute set to "provide", 
	i.e., that will provide their own grid structure. (This is the default value of TransferActionGeomObject.)
	<br/><br/>
	The method <code>NUOPC_StateRealizeField()</code> is used to realize a Field.
	Only previously advertised Fields can be realized and the Field's name is used to search the State for the previously advertised Field.
	
				</p>
			</div>
		</div>
	</div>
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.IPD.IPDv04p4">
	<div class="content">
		<div class="container">
			<div class="main">
				<h1>IPDv03p4, IPDv04p4 - Modify Decomposition of Accepted Geom Object</h1>
				<h2>Optional, Implementor Provided</h2>
				<hr />
				<p>
				Optionally modify the decomposition and distribution information of any accepted Grids/Meshes by replacing the DistGrid. This can be accomplished
				by retrieving Grid (and its DistGrid) from the Field, creating a new DistGrid with modified decomposition, creating a new
				Grid on that DistGrid, and then using <code>ESMF_FieldEmptySet()</code> to replace the existing Grid with the new one.
				</p>
			</div>
		</div>
	</div>
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.IPD.IPDv04p5">
	<div class="content">
		<div class="container">
			<div class="main">
				<h1>IPDv03p5, IPDv04p5 - Realize Fields <i>Accepting</i> a Geom Object</h1>
				<h2>Required, Implementor Provided</h2>
				<hr />
				<p>
				Realize <i>connected</i> import and export Fields that have their TransferActionGeomObject attribute set to "accept", 
				i.e., that will accept a geom object from a connected Field in another Component.
				<br/><br/>
				If the generic NUOPC Connector is used, at this point the full geom object (Grid/Mesh/XGrid/LocStream) has already
				been set in the Field and only a call to <code>ESMF_FieldEmptyComplete()</code> is required to allocate memory
				for the Field.
				<br/><br/>
				The method <code>NUOPC_StateRealizeField()</code> is used to realize a Field.
				Only previously advertised Fields can be realized and the Field's name is used to search the State for the previously advertised Field.
				</p>
			</div>
		</div>
	</div>
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.IPD.IPDv04p6">
	<div class="content">
		<div class="container">
			<div class="main">
				<h1>IPDv00p3, IPDv01p4, IPDv02p4, IPDv03p6, IPDv04p6 - Verify Connected / Set Clock</h1>
				<h2>Provided by NUOPC</h2>
				<hr />
				<p>
				If the Model's internal clock has not been set, set as a copy of the parent clock. 
				Call the SetClock (label_SetClock) specialization method (if present). 
				Verify all import fields are connected and set error code if not.
				</p>
			</div>
		</div>
	</div>
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.IPD.IPDv04p7">
	<div class="content">
		<div class="container">
			<div class="main">
				<h1>IPDv00p4, IPDv01p5, IPDv02p5, IPDv03p7, IPDv04p6 - Data Initialize</h1>
				<h2>Provided by NUOPC</h2>
				<hr />
				<p>
				Call DataInitialize (label_DataInitialize) specialization method if it exists, which initializes all export fields. 
				Set timestamp in export fields to internal clock's time.
				</p>
			</div>
		</div>
	</div>
	</doc>
	
	
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.Initialization">
	<![CDATA[
	<b>Initialize</b><hr/>
	<UL>
	<LI>phase 0: (R<SMALL>EQUIRED, </SMALL>NUOPC P<SMALL>ROVIDED</SMALL>)
	  
	<UL>
	<LI>Initialize the <TT>InitializePhaseMap</TT> Attribute according to the NUOPC Initialize Phase Definition (IPD) version 00 (see section 2.4.2 for a precise definition), with the following mapping:
	    
	<UL>
	<LI>IPDv00p1 = phase 1: (R<SMALL>EQUIRED, </SMALL>I<SMALL>MPLEMENTOR </SMALL>P<SMALL>ROVIDED</SMALL>)
	      
	<UL>
	<LI>Advertise Fields in import and export States.
	      
	</LI>
	</UL>
	</LI>
	<LI>IPDv00p2 = phase 2: (R<SMALL>EQUIRED, </SMALL>I<SMALL>MPLEMENTOR </SMALL>P<SMALL>ROVIDED</SMALL>)
	      
	<UL>
	<LI>Realize the advertised Fields in import and export States.
	      
	</LI>
	</UL>  
	</LI>
	<LI>IPDv00p3 = phase 3: (R<SMALL>EQUIRED, </SMALL>NUOPC P<SMALL>ROVIDED</SMALL>)
	      
	<UL>
	<LI>Check compatibility of the Fields' Connected status.
	      
	</LI>
	</UL>
	</LI>
	<LI>IPDv00p4 = phase 4: (R<SMALL>EQUIRED, </SMALL>NUOPC P<SMALL>ROVIDED</SMALL>)
	      
	<UL>
	<LI>Handle Field data initialization. Time stamp the export Fields.
	      
	</LI>
	</UL>
	</LI>
	</UL>
	</LI>
	</UL>  
	</LI>
	<LI>phase 3: (NUOPC P<SMALL>ROVIDED</SMALL>, suitable for: IPDv00p3, IPDv01p4, IPDv02p4)
	  
	<UL>
	<LI>If the model internal clock is found to be not set, then set the model internal clock as a copy of the incoming clock. 
	</LI>
	<LI><I>Optional specialization</I> to set the internal clock and/or alarms: <TT>label_SetClock</TT>.
	</LI>
	<LI>Check compatibility, ensuring all advertised import Fields are connected.
	  
	</LI>
	</UL>  
	</LI>
	<LI>phase 4: (NUOPC P<SMALL>ROVIDED</SMALL>, suitable for: IPDv00p4, IPDv01p5)
	  
	<UL>
	<LI><I>Optional specialization</I> to initialize export Fields: <TT>label_DataInitialize</TT>
	</LI>
	<LI>Time stamp Fields in export State for compatibility checking.
	  
	</LI>
	</UL>    
	</LI>
	<LI>phase 5: (NUOPC P<SMALL>ROVIDED</SMALL>, suitable for: IPDv02p5)
	  
	<UL>
	<LI><I>Optional specialization</I> to initialize export Fields: <TT>label_DataInitialize</TT>
	</LI>
	<LI>Timestamp Fields in export State for compatibility checking.
	</LI>
	<LI>Set Component metadata used to resolve initialize data dependencies.
	  
	</LI>
	</UL>
	</LI>
	</UL>
		
	
	]]>
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.InitP1">
	<![CDATA[
	<b>Initialize Phase 1 (IPDv00p1)</b><hr/>
	Advertise model Fields in import and export States.
	]]>
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.InitP2">
	<![CDATA[
	<b>Initialize Phase 2 (IPDv00p2)</b><hr/>
	Realize the advertised Fields in import and export States.
	]]>
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.RunPhase1">
	<div class="content">
		<div class="container">
			<div class="main">
				<h1>Run Phase 1</h1>
				<h2>(Required, NUOPC Provided)</h2>
				<hr />

				<p>
					<UL>
						<!-- 
						<LI>
							Assign the
							<TT>driverClock</TT>
							member in the internal state as an alias to the incoming Clock.
						</LI>
						-->
						<LI>
							Call the <code>SetRunClock</code> specialization method to check and set the internal Clock against the incoming Clock.
							If a phase-specific specialization exists, call it.  Else if a phase-independent specialization exists,
							call it. If neither specialization exists, the default method will check that internal Clock and incoming Clock agree
							on current time and that the time step of the incoming Clock is a multiple of the internal Clock time step. 
							Under these	conditions set the internal stop time to one time step interval of the incoming Clock. 
							Otherwise exit with error, flagging an incompatibility.
						</LI>
						<LI>
							Call the <code>CheckImport</code> specialization method to check Import Fields. If a phase-specific method
							exists, call it. Otherwise if a phase-independent method exists, call it. If neither exist, the default
							method verifies that all Import Fields are at the current time of the internal Clock.
						</LI>
						<LI>
							Time stepping loop: starting at current time, running to stop time of the internal Clock.

							<UL>
								<LI>Timestamp the Fields in the export State according to the
									current time of the internal Clock.
								</LI>
								<LI>
									Call the <code>Advance</code> specialization method, checking first for a phase-specific method and
									then for a phase-independent method.
								</LI>
								<LI>Advance the current time of the internal Clock according to
									the	time step of the internal Clock.
								</LI>
							</UL>
						</LI>
						<LI>Timestamp all Fields in the export State according to the
							current	time of the internal Clock, which now is identical to the stop time
							of the internal Clock.
						</LI>
					</UL>
					<!-- missing two specializations: AdvanceClock, TimestampExport -->
				</p>
			</div>
		</div>
	</div>
	
	

	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.SetRunClock">
	<div class="content">
		<div class="container">
			<div class="main">
				<h1>SetRunClock Specialization</h1>
				<h2>(Required, NUOPC Provided, may be phase-specific)</h2>
				<hr />

				<p>
					A specialization method to check and set the internal Clock against the incoming Clock. This
					method is called by the default run phase.
					<br/><br/>
					If not overridden, the default method will check that internal Clock and incoming Clock agree
					on current time and that the time step of the incoming Clock is a multiple of the internal Clock time step. 
					Under these	conditions set the internal stop time to one time step interval of the incoming Clock. 
					Otherwise exit with error, flagging an incompatibility.
				</p>
			</div>
		</div>
	</div>
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.CheckImport">
	<div class="content">
		<div class="container">
			<div class="main">
				<h1>CheckImport Specialization</h1>
				<h2>(Required, NUOPC Provided, may be phase-specific)</h2>
				<hr />

				<p>
					A specialization method to verify Import Fields before the model Advances in time. This method is called
					by the default run phase.
					<br/><br/>
					If not overridden, the default
					method verifies that all Import Fields are at the current time of the internal Clock.
				</p>
			</div>
		</div>
	</div>	
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.ModelAdvance">
	<div class="content">
		<div class="container">
			<div class="main">
				<h1>Advance Specialization</h1>
				<h2>(Required, Implementor Provided, may be phase-specific)</h2>
				<hr />

				<p>
					A specialization method that advances the model forward in time by one timestep
					of the internal clock.  This method will be called iteratively by the default
					run phase until reaching the stop time on the internal clock.
				</p>
			</div>
		</div>
	</div>		
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.FinalizeP1">
	<![CDATA[
	<b>Finalize</b><hr />
	Optionally overwrite the provided NOOP with model finalization code.
	]]>
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.SetClock">
	<div class="content">
		<div class="container">
			<div class="main">
				<h1>SetClock Specialization</h1>
				<h2>(Optional, Implementor Provided)</h2>
				<hr />

				<p>
				If present, this specialization will be called during phases IPDv00p3, IPDv01p4, IPDv02p4, IPDv03p6, and IPDv04p6.
				The specialization method can change aspects of the internal clock, which defaults to a copy of the incoming parent
				clock.  For example, the timeStep size may be changed and/or Alarms may be set on the clock.
				<br/><br/>
				The method <code>NUOPC_CompSetClock(comp, externalClock, stabilityTimeStep, rc)</code> can be used to 
				set the internal clock as a copy of externalClock, but
			    with a timeStep that is less than or equal to the stabilityTimeStep.
			    At the same time ensure that the timeStep of the external clock is
			    a multiple of the timeStep of the internal clock. If the stabilityTimeStep
			    argument is not provided then the internal clock will simply be set
			    as a copy of the external clock.
				</p>
			</div>
		</div>
	</div>
	</doc>
	
	<doc class="org.earthsystemmodeling.cupid.nuopc.v7bs50.NUOPCModel.DataInitialize">
	<div class="content">
		<div class="container">
			<div class="main">
				<h1>DataInitialize Specialization</h1>
				<h2>(Optional, Implementor Provided)</h2>
				<hr />

				<p>
				If present, this specialization will be called during phases IPDv00p4, IPDv01p5, IPDv02p5, IPDv03p7, and IPDv04p6.
				The specialization method should initialize Field data in the Component's Export State.  Fields in the Export State
				will be timestamped automatically by the calling phase, so there is no need to do it here.
				</p>
			</div>
		</div>
	</div>
	</doc>
	
	
</docs>